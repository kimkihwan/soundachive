{% extends 'board/base.html' %}

{% block dropdown %}
    {% for cat in categories %}
        {% if cat == post.category %}
            <a class="dropdown-item active" href="{% url 'board:post_list' pk=cat.id %}">{{ cat.name }}</a>
        {% else %}
            <a class="dropdown-item" href="{% url 'board:post_list' pk=cat.id %}">{{ cat.name }}</a>
        {% endif %}
    {% endfor %}
    <div class="dropdown-divider"></div>
    {% for tag in tags %}
        <a class="dropdown-item" href="{% url 'board:post_list' tag=tag.name %}">#{{ tag.name }}</a>
    {% endfor %}
{% endblock %}

{% block content %}
    <div class="post">
        <div class="date">
            {{ post.created_date }}
        </div>
        <h2>
            {{ post.title }}
            <small><i>{{ post.category }}, 작성자: {{ post.author }}</i></small>
        </h2>
        <p>{{ post.text|linebreaksbr }}</p>
        <p>
        {% if post.audio_file %}
            <audio controls style="width:100%; max-width:600px">
                <source src="{{ post.audio_file.url }}">
            </audio>
        {% else %}
            <p>!!첨부된 오디오 파일이 없습니다!!</p>
        {% endif %}
        </p>
        <p>Tag : {{ post.tag_list }}</p>
        <p>Liked by [{{ post.like }}] : {{ post.like_list }}</p>
        <p>Disliked by [{{ post.dislike }}] : {{ post.dislike_list }}</p>
        {% if user.is_authenticated %}
            <p>
            {% if user.is_superuser or user == post.author %}
            <a class="btn btn-lg btn-default" href="{% url 'board:post_edit' pk=post.pk %}">수정</a>
            <a class="btn btn-lg btn-default" href="{% url 'board:post_remove' pk=post.pk %}">삭제</a>
            {% endif %}
            <a class="btn btn-lg btn-default" href="{% url 'board:post_like' pk=post.pk %}">추천</a>
            <a class="btn btn-lg btn-default" href="{% url 'board:post_dislike' pk=post.pk %}">비추천</a>
            </p>
        {% endif %}
    </div>
{% endblock %}